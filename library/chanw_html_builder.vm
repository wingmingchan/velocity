#*
《code》
《copyright》
Authur: Wing Ming Chan
Copyright (c) 2017 Wing Ming Chan <chanw@upstate.edu>
MIT Licensed
Modification history:
《/copyright》
《documentation id=“top”》
《h2》Introduction《/h2》
《p》This format defines an html builder.《/p》
《/documentation》
*#
#import( '/formats/library/velocity/chanw_global_values' )
#*
《global-variables》
*#
#set( $chanwHtmlBuilderGlobalVariables = [
    "chanwClassesTrimmed",
    "chanwCreateElementWithAttrsText",
    "chanwCreateElementWithIdClassesMacroGlobal",
    "chanwCreateElementWithIdClassesText",
    "chanwIdTrimmed",
    "chanwResultString",
    "chanwStartTag"
] )
#*
《/global-variables》
《documentation》
《code》#chanwCreatePreWithText( $text )《/code》
《p》Creates a pre element wrapping up a string.《/p》
《/documentation》
《macro id=“chanwCreatePreWithText”》
*#
#macro( chanwCreatePreWithText $text )
$S_PRE
$chanwNEWLINE$text
$E_PRE
#end
#*
《/macro》
《documentation》
《code》#chanwCreateElementWithIdClassesText( $chanwElement $chanwId $chanwClasses $chanwText )《/code》
《p》Creates an element by passing in the element name, an id (or empty string),
a string of CSS classes (or empty string), and the text of the element.《/p》
《/documentation》
《macro id=“chanwCreateElementWithIdClassesText”》
*#
#macro( chanwCreateElementWithIdClassesText $chanwElement $chanwId $chanwClasses $chanwText )
    #set( $chanwStartTag       = "<$chanwElement" )
    #set( $chanwIdTrimmed      = $chanwId.trim() )
    #set( $chanwClassesTrimmed = $chanwClasses.trim() )
    
    ## add non-empty id
    #if( $chanwIdTrimmed != "" )
        #set( $chanwStartTag = $chanwStartTag + " id='$chanwIdTrimmed'" )
    #end
    ## add non-empty classes
    #if( $chanwClassesTrimmed != "" )
        #set( $chanwStartTag = $chanwStartTag + " class='$chanwClassesTrimmed'" )
    #end
      
    #set( $chanwCreateElementWithIdClassesText = 
        $chanwStartTag + ">" + $chanwText + "</$chanwElement>" )
#end
#*
《/macro》
《documentation》
《code》#chanwCreateElementWithIdClassesMacroGlobal(  $chanwElement $chanwId $chanwClasses $chanw_code $chanw_global_var )《/code》
《p》Creates an element by passing in the element name, an id (or empty string),
a string of CSS classes (or empty string), a string containing Velocity code (call to a macro) to be evaluated, and the corresponding global variable.《/p》
《/documentation》
《macro id=“chanwCreateElementWithIdClassesMacroGlobal”》
*#
#macro( chanwCreateElementWithIdClassesMacroGlobal 
    $chanwElement $chanwId $chanwClasses $chanwCode $chanwGlobalVar )
    #evaluate( $chanwCode )
    #set( $chanwResultString = $chanwGlobalVar )
    #chanwCreateElementWithIdClassesText( $chanwElement $chanwId $chanwClasses $chanwResultString )
    #set( $chanwCreateElementWithIdClassesMacroGlobal = 
        $chanwCreateElementWithIdClassesText )
#end
#*
《/macro》
《documentation》
《code》#chanwCreateElementWithAttrsText( $chanwElement $chanwMap $chanwText )《/code》
《p》Creates an element by passing in the element name, a map containing attribute names and values, and the text of the element.《/p》
《/documentation》
《macro id=“chanwCreateElementWithAttrsText”》
*#
#macro( chanwCreateElementWithAttrsText $chanwElement $chanwMap $chanwText )
    #set( $chanwStartTag = "<$chanwElement" )
    #set( $chanwKeys = $chanwMap.keySet() )
    
    #foreach( $chanwKey in $chanwKeys )
        #set( $chanwValue = $chanwMap.get( $chanwKey ) )
        #set( $chanwValue = $chanwValue.trim() )
       
        #if( $chanwValue != "" )
            #set( $chanwStartTag = $chanwStartTag + " $chanwKey='$chanwValue'" )
        #end
    #end
   
    #set( $chanwCreateElementWithAttrsText = $chanwStartTag + ">" + 
        $chanwText + "</$chanwElement>" )
#end
#*
《/macro》
《documentation id=“bottom”》
《/documentation》
《/code》
*#